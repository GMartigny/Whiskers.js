function e(e,t,n){let r=e[t];const s=n(r);return Object.defineProperty(e,t,{get:()=>r,set:e=>{r=e,n(r,s)}}),s}class t extends Array{#e;setOnChange(e){this.#e=e}push(...e){super.push(...e),this.#e?.("push",e)}pop(){super.pop(),this.#e?.("pop")}shift(){super.shift(),this.#e("shift")}unshift(...e){super.unshift(...e),this.#e?.("unshift",e)}splice(...e){super.splice(...e),this.#e?.("splice",e)}sort(...e){super.sort(...e),this.#e?.("sort",e)}reverse(){super.reverse(),this.#e?.("reverse")}}function n(e,n,r,s){let i=new t(...e[n]);const o=r(i.map((e=>s(e))));function a(e,t){switch(e){case"push":t.forEach((e=>o.appendChild(s(e))));break;case"pop":o.lastChild&&o.removeChild(o.lastChild);break;case"shift":o.firstChild&&o.removeChild(o.firstChild);break;case"splice":const[e,n,...r]=t;for(let t=0;t<n;++t)o.removeChild(o.children[e]);if(r.length){const t=o.children[e]??null;r.forEach((e=>o.insertBefore(s(e),t)))}break;case"unshift":t.forEach((e=>{o.children.length?o.insertBefore(s(e),o.firstChild):o.appendChild(s(e))}));break;default:o.innerHTML&&console.warn("Total reflow of",o),o.innerHTML="",i.forEach((e=>o.appendChild(s(e))))}}return i.setOnChange(a),Object.defineProperty(e,n,{get:()=>i,set:e=>{if(!Array.isArray(e))throw new window.TypeError(`Value of ${n} should be an array.`);i=new t(...e),a()}}),o}function r(t,r,s,i){if(void 0===t[r]){const{name:e}=t.constructor,n=`The prop [${r}] doesn't exists on [${e}]. Couldn't make it reactive.`;throw new window.ReferenceError(n,{cause:t})}return(Array.isArray(t[r])?n:e)(t,r,s,i)}function s(e,t,n){const{Node:r,document:s,Text:i}=window,o=e instanceof r?e:s.createElement(e||"div");let a=n;return void 0===n&&t?.constructor!==Object?a=t:Object.keys(t||{}).forEach((e=>{switch(!0){case e.startsWith("."):o[e.slice(1)]=t[e];break;case e.startsWith("@"):o.addEventListener(e.slice(1),(n=>{var r;t[e]("@input"===e&&o instanceof HTMLInputElement?"checkbox"===(r=o).getAttribute("type")?r.checked:r.value:n)}));break;default:t[e]||""===t[e]?o.setAttribute(e,!0===t[e]?"":t[e]):o.removeAttribute(e)}})),o.innerHTML="",Array.isArray(a)?a.filter((e=>void 0!==e)).forEach((e=>o.appendChild(e instanceof r?e:new i(e.toString())))):a&&o.appendChild(a instanceof r?a:new i(a.toString())),o}function i(e,t=0){const n=" ".repeat(4*t);return Object.keys(e).reduce(((r,s)=>"object"==typeof e[s]?`${r}${r?"\n\n":""}${n}${s} {${i(e[s],t+1)}\n${n}}`:`${r}\n${n}${s}: ${e[s].toString()};`),"").trimEnd()}function o(e){const t=window.document.createElement("style");return t.textContent="string"==typeof e?e:i(e),t}export{i as getCSS,r as reactive,s as render,o as renderStyle};
